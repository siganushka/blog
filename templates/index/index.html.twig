{% extends 'base.html.twig' %}

{% block title %}Hello IndexController!{% endblock %}

{% block main %}
{% for label, messages in app.flashes(['primary', 'success', 'danger', 'warning', 'error']) %}
  {% for message in messages %}
    <div class="alert alert-{{ label }}" role="alert">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endfor %}
{% endfor %}

<ul class="mt-3">
  {% for post in posts %}
    <li>
      <a href="{{ path('app_post_show', {id: post.id}) }}">{{ post.title }}</a>

      {% if is_granted('POST_EDIT', post) %}
      <a href="{{ path('app_post_edit', {id: post.id}) }}" class="text-info">修改</a>
      {% endif %}

      {% if is_granted('POST_DELETE', post) %}
      <a href="{{ path('app_post_delete', {id: post.id, token: csrf_token('delete')}) }}" class="text-danger">删除</a>
      {% endif %}
    </li>
  {% else %}
    <li>No items.</li>
  {% endfor %}
</ul>
{% endblock %}
